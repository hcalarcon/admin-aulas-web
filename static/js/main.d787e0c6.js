(()=>{"use strict";var e={1754:(e,t,a)=>{a.r(t);var r=a(4636),n=a(3841),o=a(3923),i=a(5991),s=a(9649),l=a(733);const d=async e=>{try{await l.default.setItem("user",JSON.stringify(e))}catch(t){console.error("Error guardando el usuario:",t)}},c=async(e,t)=>{try{await l.default.setItem(e,t)}catch(a){console.error("Error guardando en storage:",a)}},u=async e=>{try{return await l.default.getItem(e)}catch(t){return console.error("Error obteniendo de storage:",t),null}},f=async e=>{try{await l.default.setItem("aulas",JSON.stringify(e))}catch(t){console.log("error al guardar materias",t)}},m=async()=>{try{const e=await l.default.getItem("aulas");return null!=e?JSON.parse(e):null}catch(e){return console.log("no hay aulas",e),null}},h=async(e,t)=>{try{await l.default.setItem(`clases_${e}`,JSON.stringify(t))}catch(a){console.error("Error guardando clases:",a)}},g=async e=>{try{const t=await l.default.getItem(`clases_${e}`);return t?JSON.parse(t):null}catch(t){return console.error("Error leyendo clases:",t),null}},x=async e=>{try{const t=JSON.stringify(e);await c("transaccion_profe",t)}catch(t){console.error("Error al guardar alarcoin en storage:",t)}},p=async e=>{try{const t=JSON.stringify(e);await c("transaccion_alumno",t)}catch(t){console.error("Error al guardar alarcoin del alumno:",t)}};var j=a(8853);const y=(0,s.createContext)({user:null,setUser:()=>{},token:null,setToken:()=>{},logout:()=>{},loading:!0}),b=({children:e})=>{const[t,a]=(0,s.useState)(null),[r,n]=(0,s.useState)(!0),[o,i]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{const e=await(async()=>{try{const e=await l.default.getItem("user");return null!==e?JSON.parse(e):null}catch(e){return console.error("Error obteniendo el usuario:",e),null}})(),t=await u("token");e&&a(e),t&&i(t),n(!1)})()}),[]);return(0,j.jsx)(y.Provider,{value:{user:t,setUser:async e=>{a(e),e?await d(e):await(async e=>{try{await l.default.removeItem(e)}catch(t){console.error("Error eliminando de storage:",t)}})("user")},loading:r,token:o,setToken:i,logout:async()=>{try{await l.default.clear()}catch(e){console.log("error al borrar items",e)}a(null),i(null)}},children:e})},w=()=>(0,s.useContext)(y);var v=a(4147),C=a(3198),S=a(143),T=a(8363),k=a(5220),E=a(5830),B=a(9978),P=a(3997),z=a(4642);const D=({children:e})=>{const{colors:t}=(0,z.useTheme)();return(0,j.jsx)(P.LinearGradient,{colors:[t.primary,t.background],start:{x:.6,y:1},end:{x:.5,y:0},style:I.gradient,children:(0,j.jsx)(E.default,{style:I.safeArea,children:(0,j.jsx)(k.default,{style:I.flex,behavior:"height",keyboardVerticalOffset:B.default.currentHeight||0,children:(0,j.jsx)(T.default,{contentContainerStyle:I.scrollContainer,keyboardShouldPersistTaps:"handled",children:(0,j.jsx)(C.default,{style:I.innerContainer,children:e})})})})})},I=v.default.create({gradient:{flex:1},safeArea:{flex:1,paddingTop:0},flex:{flex:1},scrollContainer:{flexGrow:1},innerContainer:{flex:1,padding:16}}),A="https://adminaulas.onrender.com";async function _(){const e=await u("token"),t=await fetch(`${A}/epetcoins/historial`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok){const e=await t.json();throw new Error(e.detail||"Error al obtener historial")}return await t.json()}async function M(){const e=await u("token"),t=await fetch(`${A}/epetcoins/historial`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok){const e=await t.json();throw new Error(e.detail||"Error al obtener historial")}return await t.json()}const O=(0,s.createContext)(void 0),R=({children:e})=>{const{token:t,user:a}=w(),[r,n]=(0,s.useState)([]),[o,i]=(0,s.useState)({}),[d,c]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),[y,b]=(0,s.useState)(!1),[v,C]=(0,s.useState)(!1),S=async e=>{(e=>{const t=Object.assign({},o);Object.keys(t).forEach((e=>{t[+e]=Object.assign({},t[+e],{epetcoin:0})})),e.forEach((e=>{e.alumnos.forEach((e=>{const a=(e=>e.reduce(((e,t)=>e+(t.suma?t.cantidad:-t.cantidad)),0))(e?.epetcoins);t[e.id]&&(t[e.id].epetcoin=(t[e.id].epetcoin||0)+a)}))})),i(t)})(e),g(e),await x(e)},T=async e=>{g(e),await p(e)},k=async()=>{try{const e=await(async()=>{try{const e=await l.default.getItem("epetCoin");return e?JSON.parse(e):null}catch(e){return console.error("Error leyendo epetCoin:",e),null}})();if(e)return C(e),!0;const t=await async function(){try{const e=await u("token"),t=await fetch(`${A}/epetcoins/me`,{headers:{Authorization:`Bearer ${e}`}});return await t.json()}catch(e){return void console.error("Error al consultar /me",e)}}();if(t?.coin)return!1;await(async e=>{try{await l.default.setItem("epetCoin",JSON.stringify(e))}catch(t){console.error("Error guardando epetCoin:",t)}})(t),C(t)}catch(e){return 404===e?.response?.status?(C(!1),!1):(console.error("Error verificando epetcoin:",e),!1)}},E=async e=>{try{const t=await m();if(t)return n(t),void c(!1);const r=await async function(e){const t=await fetch(`${A}/aulas/mis-aulas`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok){const e=await t.json();throw new Error(e.detail||"Error al iniciar sesi\xf3n")}return await t.json()}(e),o=r.map((e=>Object.assign({},e,{alumnos:[a],alumnoIds:[a.id]})));n(o),await f(o)}catch(t){}},B=async e=>{try{const t=await m(),a=await(async()=>{try{const e=await l.default.getItem("alumnos");if(!e)return null;const t=JSON.parse(e),a={};return t.forEach((e=>{a[e.id]=e})),a}catch(e){return console.error("Error al leer alumnos desde storage:",e),null}})();if(t&&a)return n(t),i(a),void c(!1);const r=await async function(e){const t=await fetch(`${A}/aulas/mis-aulas-con-alumnos`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok){const e=await t.json();throw new Error(e.detail||"Error al iniciar sesi\xf3n")}return await t.json()}(e),o={},s=r.map((e=>(e.alumnos.forEach((e=>{o[e.id]=e})),{id:e.id,nombre:e.nombre,ano:e.ano,division:e.division,especialidad:e.especialidad,profesor_id:e.profesor_id,cantidad_clases:e.cantidad_clases,tipo:e.tipo,alumnoIds:e.alumnos.map((e=>e.id))})));n(s),i(o),await f(s),await(async e=>{try{const t=JSON.stringify(e);await l.default.setItem("alumnos",t)}catch(t){console.error("Error al guardar alumnos:",t)}})(Object.values(o))}catch(t){console.error("Error cargando datos desde appData:",t)}finally{c(!1)}},P=async e=>{const r=e||t;r&&(a?.is_teacher?await B(r):await E(r))};return(0,s.useEffect)((()=>{P()}),[t]),(0,j.jsx)(O.Provider,{value:{aulas:r,alumnosMap:o,isLoading:d,loadData:P,transaccioncoins:h,loadAlarcoins:async(e=!1)=>{b(!1);try{if(a?.is_teacher){if(!await k())return!1;if(e){const e=await _();S(e),await x(e)}else{const e=await(async()=>{try{const e=await u("transaccion_profe");return e?JSON.parse(e):null}catch(e){return console.error("Error al leer alarcoins profe:",e),null}})();if(e)S(e);else{const e=await _();S(e),await x(e)}}}else if(e){const e=await M();T(e),await p(e)}else{const e=await(async()=>{try{const e=await u("transaccion_alumno");return e?JSON.parse(e):null}catch(e){return console.error("Error al leer alarcoin del alumno:",e),null}})();if(e)T(e);else{const e=await M();T(e),await p(e)}}}catch(t){console.error("Error cargando alarcoins:",t),b(!0)}finally{c(!1)}},alarcoinsError:y,epetCoin:v},children:e})},L=()=>{const e=(0,s.useContext)(O);if(!e)throw new Error("useAppData debe usarse dentro de AppDataProvider");return e};var W=a(6437),N=a(8082);const $="#b14aca";var V=a(2317),F=a(2969),G=a(8810);const J=({title:e,value:t,icon:a,color:r="#6200ee"})=>(0,j.jsx)(V.default,{style:H.card,mode:"contained",children:(0,j.jsxs)(V.default.Content,{style:H.cardContent,children:[(0,j.jsx)(F.default,{icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:a,color:e,size:t}),style:{backgroundColor:r}}),(0,j.jsxs)(C.default,{style:{marginLeft:12},children:[(0,j.jsx)(N.default,{variant:"labelLarge",style:{color:"#777"},children:e}),(0,j.jsx)(N.default,{variant:"titleMedium",style:{fontWeight:"bold"},children:t})]})]})}),H=v.default.create({card:{width:"100%",maxWidth:600,minWidth:350,marginBottom:12,elevation:12,borderRadius:12,alignSelf:"center"},cardContent:{flexDirection:"row",alignItems:"center"}});var q=a(223),U=a(9812),K=a(2030),Z=a(3231),Q=a(9454),X=a(2520);const Y=({alumnos:e})=>(0,j.jsx)(V.default,{style:ee.card,children:(0,j.jsx)(q.default,{title:`Alumnos (${e.length})`,left:e=>(0,j.jsx)(U.default,Object.assign({},e,{icon:({size:e,color:t})=>(0,j.jsx)(X.default,{name:"account-group-outline",size:e,color:t})})),right:e=>(0,j.jsx)(X.default,{name:e.isExpanded?"chevron-up":"chevron-down",size:24,color:"#fff"}),titleStyle:ee.accordionTitle,style:ee.accordion,children:0===e.length?(0,j.jsx)(K.default,{title:"No hay alumnos",left:e=>(0,j.jsx)(U.default,Object.assign({},e,{icon:({size:e,color:t})=>(0,j.jsx)(X.default,{name:"alert-circle-outline",size:e,color:t})})),titleStyle:{color:"#888"}}):e.map(((t,a)=>(0,j.jsxs)(C.default,{children:[(0,j.jsx)(K.default,{title:t.nombre,description:t.email,left:()=>(0,j.jsx)(Z.default,{size:36,label:t.nombre?t.nombre[0].toUpperCase():"A",style:ee.avatar,color:"#fff"}),titleStyle:ee.itemTitle,descriptionStyle:ee.itemDescription,style:ee.listItem}),a<e.length-1&&(0,j.jsx)(Q.default,{})]},t.id)))})}),ee=v.default.create({card:{width:"100%",maxWidth:600,marginBottom:12,elevation:12,borderRadius:16,overflow:"hidden"},accordion:{},accordionTitle:{color:"#fff",fontWeight:"bold",fontSize:18},listItem:{backgroundColor:"#fff",paddingVertical:6,paddingHorizontal:8},itemTitle:{color:"#C93A4A",fontWeight:"600",fontSize:16},itemDescription:{color:"#888",fontSize:13},avatar:{backgroundColor:"#C93A4A",marginRight:8}}),te=()=>{const{width:e}=(0,S.default)(),t=e<400,{user:a,loading:r}=w(),{aulas:n,alumnosMap:o,isLoading:i,alarcoins:s}=L(),l=i&&r,d=n.reduce(((e,t)=>e+(t.cantidad_clases||0)),0),{saludo:c,fecha:u}=(()=>{const e=new Date,t=e.getHours();let a;return a=t>=6&&t<12?"Buenos d\xedas":t>=12&&t<19?"Buenas tardes":"Buenas noches",{saludo:a,fecha:e.toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})}})();return(0,j.jsx)(D,{children:l?(0,j.jsx)(W.default,{size:"large",color:$}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(C.default,{style:[ae.header,t&&ae.headerSmall],children:[(0,j.jsxs)(C.default,{children:[(0,j.jsx)(N.default,{variant:"titleMedium",children:`${c}, ${a?.nombre}`}),(0,j.jsx)(N.default,{variant:"labelMedium",children:a?.is_teacher?"Profesor":"Alumno"})]}),(0,j.jsx)(C.default,{style:t&&{marginTop:8},children:(0,j.jsx)(N.default,{variant:"bodySmall",children:u})})]}),(0,j.jsxs)(C.default,{style:ae.cardsContainer,children:[(0,j.jsx)(J,{title:"Aulas",value:n.length,icon:"school",color:$}),(0,j.jsx)(J,{title:"Clases",value:d,icon:"calendar",color:"#C93A9F"}),a?.is_teacher&&(0,j.jsx)(Y,{alumnos:Object.values(o)})]})]})})},ae=v.default.create({header:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16,gap:10},headerSmall:{flexDirection:"column",alignItems:"flex-start",gap:4},cardsContainer:{flexWrap:"wrap",alignContent:"center",justifyContent:"space-between",gap:16,marginBottom:24},alumnosListContainer:{marginTop:16}});var re=a(552),ne=a(500),oe=a(7799),ie=a(8488),se=a(1561);var le=a(397);const de=se.object().shape({email:se.string().email("Email inv\xe1lido").required("Requerido"),password:se.string().min(6,"M\xednimo 6 caracteres").required("Requerido")});function ce(){(0,n.useNavigation)();const{loading:e,setUser:t,setToken:a}=w(),{loadData:r}=L(),{colors:o}=(0,z.useTheme)(),i=async(e,n,o,i)=>{try{const n=await async function(e){const t=await fetch(`${A}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.detail||"Error al iniciar sesi\xf3n")}return await t.json()}(e);i(),t(n.user),a(n.access_token),await d(n.user),await c("token",n.access_token),r(n.access_token)}catch(s){o("Credenciales inv\xe1lidas")}finally{n(!1)}};return(0,j.jsx)(D,{children:e?(0,j.jsx)(re.default,{children:"Cargando ..."}):(0,j.jsx)(C.default,{style:ue.container,children:(0,j.jsxs)(C.default,{style:ue.card,children:[(0,j.jsx)(re.default,{style:ue.title,children:"Iniciar sesi\xf3n"}),(0,j.jsx)(ie.Formik,{initialValues:{email:"",password:""},validationSchema:de,onSubmit:(e,{setSubmitting:t,setErrors:a,resetForm:r})=>i(e,t,(e=>a({password:e})),r),children:({handleChange:e,handleBlur:t,handleSubmit:a,values:r,errors:n,touched:i,isSubmitting:s})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ne.default,{style:ue.input,placeholder:"Email",onChangeText:e("email"),onBlur:t("email"),value:r.email,keyboardType:"email-address",autoCapitalize:"none"}),i.email&&n.email&&(0,j.jsx)(re.default,{style:ue.error,children:n.email}),(0,j.jsx)(ne.default,{style:ue.input,placeholder:"Contrase\xf1a",onChangeText:e("password"),onBlur:t("password"),value:r.password,secureTextEntry:!0}),i.password&&n.password&&(0,j.jsx)(re.default,{style:ue.error,children:n.password}),(0,j.jsx)(le.default,{onPress:()=>a(),style:{backgroundColor:o.backdrop,paddingVertical:8,marginTop:15},children:s?(0,j.jsx)(oe.default,{color:"#fff"}):(0,j.jsx)(re.default,{style:ue.buttonText,children:"Ingresar"})})]})})]})})})}const ue=v.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},card:{width:"85%",padding:24,borderRadius:12,backgroundColor:"#fefefe80",elevation:6,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:5,maxWidth:400},title:{fontSize:22,fontWeight:"bold",marginBottom:16,textAlign:"center"},input:{height:48,borderColor:"#ccc",borderWidth:1,borderRadius:8,paddingHorizontal:12,marginTop:12,backgroundColor:"#fff"},error:{color:"red",fontSize:12,marginTop:4,marginLeft:4},buttonText:{color:"#fff",fontWeight:"600",fontSize:16}});var fe=a(8587),me=a(9343),he=a(4423);async function ge(e){const t=await u("token"),a=await fetch(`${A}/users/me`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!a.ok){const e=await a.json();throw new Error(e.detail||"Error al actualizar el usuario")}return await a.json()}const xe=["newPassword","confirmPassword"],pe=se.object().shape({nombre:se.string().required("El nombre es obligatorio"),apellido:se.string().required("El apellido es obligatorio"),email:se.string().email("Email inv\xe1lido").required("Email requerido"),newPassword:se.string().min(6,"M\xednimo 6 caracteres"),confirmPassword:se.string().oneOf([se.ref("newPassword"),""],"Las contrase\xf1as no coinciden")}),je=v.default.create({container:{flexGrow:1,padding:15,alignItems:"center",minHeight:"100%"},header:{fontWeight:"bold",fontSize:28,marginTop:16,marginBottom:4,alignSelf:"flex-start",letterSpacing:.5},subheader:{marginBottom:16,alignSelf:"flex-start",fontSize:16,opacity:.85},avatarContainer:{alignItems:"center",marginVertical:16,width:"100%"},cardheader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingRight:8,paddingTop:8},cardTitle:{fontSize:20,fontWeight:"bold"},cardSubtitle:{fontSize:14},editButton:{marginTop:16,borderRadius:20,minWidth:120,elevation:0,alignSelf:"center"},card:{width:"100%",maxWidth:500,alignSelf:"center",marginTop:16,paddingHorizontal:0,borderRadius:16,elevation:2},form:{gap:8,marginTop:8,width:"100%"},input:{marginBottom:4},error:{fontSize:12,marginBottom:4,marginLeft:4},buttonGroup:{marginTop:16,flexDirection:"row",justifyContent:"flex-end",gap:8},saveButton:{marginLeft:8,borderRadius:20,minWidth:100},cancelButton:{borderColor:"#ccc",borderRadius:20,minWidth:100},logoutButton:{marginTop:32,width:"100%",maxWidth:500,alignSelf:"center",borderRadius:20,borderWidth:1,borderColor:"#e53935",color:"#e53935"}}),ye=()=>{const{user:e}=w(),[t,a]=(0,s.useState)(!1),[r,n]=(0,s.useState)(e?.nombre),[o,i]=(0,s.useState)(e?.apellido),[l,d]=(0,s.useState)(e?.email),{colors:c}=(0,z.useTheme)(),{width:u}=(0,S.default)(),[f,m]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),{setUser:x}=w(),p=()=>a(!0),y=()=>{a(!1),m(""),g("")};return(0,j.jsx)(D,{children:(0,j.jsxs)(T.default,{contentContainerStyle:[je.container,,],children:[(0,j.jsx)(N.default,{variant:"titleLarge",style:[je.header,{color:c.primary}],children:"Perfil"}),(0,j.jsx)(N.default,{variant:"bodyMedium",style:[je.subheader,{color:c.onSurfaceVariant}],children:"Administra tu informaci\xf3n personal"}),(0,j.jsxs)(V.default,{style:[je.card,{backgroundColor:c.surface}],children:[(0,j.jsx)(C.default,{style:je.cardheader,children:(0,j.jsx)(V.default.Title,{title:"Informaci\xf3n Personal",subtitle:"Actualiza tu informaci\xf3n de cuenta",titleStyle:[je.cardTitle,{color:c.primary}],subtitleStyle:[je.cardSubtitle,{color:c.onSurfaceVariant}]})}),(0,j.jsx)(Q.default,{style:{marginBottom:8,backgroundColor:c.outlineVariant}}),(0,j.jsx)(V.default.Content,{children:(0,j.jsx)(ie.Formik,{initialValues:{nombre:r||"",apellido:o||"",email:l||"",newPassword:"",confirmPassword:""},validationSchema:pe,onSubmit:e=>{(async e=>{const{newPassword:t,confirmPassword:r}=e,n=(0,fe.default)(e,xe);if(t&&t!==r)me.default.alert("Error","Las contrase\xf1as no coinciden.");else try{const e=await ge(Object.assign({},n,{password:t||void 0}));x(e),a(!1)}catch(o){me.default.alert("Error",o.message)}})(e)},enableReinitialize:!0,children:({handleChange:e,handleBlur:a,handleSubmit:s,values:x,errors:b,touched:w})=>(0,j.jsxs)(C.default,{style:je.form,children:[(0,j.jsx)(he.default,{label:"Nombre",value:r,onChangeText:n,editable:t,mode:"flat",style:[je.input,{backgroundColor:t?c.background:c.surfaceDisabled}],error:!!b.nombre&&w.nombre,onBlur:a("name"),left:(0,j.jsx)(he.default.Icon,{icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"person-outline",color:e,size:t})})}),t&&b.nombre&&w.nombre&&(0,j.jsx)(N.default,{style:[je.error,{color:c.error}],children:b.nombre}),(0,j.jsx)(he.default,{label:"Apellido",value:o,onChangeText:i,editable:t,mode:"flat",style:[je.input,{backgroundColor:t?c.background:c.surfaceDisabled}],error:!!b.apellido&&w.apellido,onBlur:a("apellido"),left:(0,j.jsx)(he.default.Icon,{icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"person-outline",color:e,size:t})})}),t&&b.apellido&&w.apellido&&(0,j.jsx)(N.default,{style:[je.error,{color:c.error}],children:b.apellido}),(0,j.jsx)(he.default,{label:"Email",value:l,editable:t,onChangeText:d,mode:"flat",style:[je.input,{backgroundColor:c.surfaceDisabled}],error:!!b.email&&w.email,onBlur:a("email"),left:(0,j.jsx)(he.default.Icon,{icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"mail-outline",color:e,size:t})})}),t&&b.email&&w.email&&(0,j.jsx)(N.default,{style:[je.error,{color:c.error}],children:b.email}),t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(he.default,{label:"Nueva clave",secureTextEntry:!0,value:f,onChangeText:m,placeholder:"********",mode:"flat",autoComplete:"off",textContentType:"none",importantForAutofill:"no",style:[je.input,{backgroundColor:c.background}],error:!!b.newPassword&&w.newPassword,onBlur:a("newPassword"),left:(0,j.jsx)(he.default.Icon,{icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"lock-closed-outline",color:e,size:t})})}),b.newPassword&&w.newPassword&&(0,j.jsx)(N.default,{style:[je.error,{color:c.error}],children:b.newPassword}),(0,j.jsx)(he.default,{label:"Repetir clave",secureTextEntry:!0,value:h,onChangeText:g,placeholder:"********",mode:"flat",style:[je.input,,],left:(0,j.jsx)(he.default.Icon,{icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"lock-closed-outline",color:e,size:t})})}),(0,j.jsxs)(C.default,{style:je.buttonGroup,children:[(0,j.jsx)(le.default,{mode:"outlined",style:[je.cancelButton,{borderColor:c.outline},u<400&&{flex:1}],onPress:y,labelStyle:{color:c.primary},children:"Cancelar"}),(0,j.jsx)(le.default,{mode:"contained",style:[je.saveButton,{backgroundColor:c.primary},u<400&&{flex:1}],onPress:s,labelStyle:{color:c.onPrimary},children:"Guardar"})]})]}),!t&&(0,j.jsx)(le.default,{style:[je.editButton,{backgroundColor:c.primary},u<400&&{width:"100%",alignSelf:"center"}],mode:"contained",icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"pencil",color:e,size:t}),onPress:p,labelStyle:{color:c.onPrimary,fontSize:16},contentStyle:{paddingVertical:8},children:"Editar"})]})})})]})]})})};var be=a(3124),we=a(193),ve=a(2773),Ce=a(2149);const Se=(e,t)=>`${e?.trim()?.[0]?.toUpperCase()??""}${t?.trim()?.[0]?.toUpperCase()??""}`,Te=v.default.create({profile:{alignItems:"center",marginBottom:16,maxWidth:350,margin:10,width:"100%"},avatar:{backgroundColor:"#c001f5"},name:{marginTop:8,fontWeight:"bold"},role:{fontSize:14,color:"#6b7280"}}),ke=({alarcoins:e,isalarcoins:t=!1,user:a,loading:r,desdeProfe:o})=>{const{colors:i}=(0,n.useTheme)();return(0,j.jsxs)(C.default,{style:[Te.profile,t&&{backgroundColor:i.background,borderRadius:12,padding:16,elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41}],children:[(0,j.jsx)(Z.default,{label:Se(a?.nombre,a?.apellido),size:64,style:Te.avatar}),(0,j.jsx)(N.default,{variant:"titleLarge",style:Te.name,children:r?"Cargando":`${a?.nombre} ${a?.apellido}`}),!t&&(0,j.jsx)(N.default,{variant:"bodySmall",style:Te.role,children:r?"cargando":a?.is_teacher?"Profesor":"Alumno"}),t&&(0,j.jsxs)(C.default,{children:[(0,j.jsx)(N.default,{variant:"bodyMedium",children:o?"epetCoins":"Tus epetCoins"}),(0,j.jsx)(N.default,{variant:"bodyMedium",style:{textAlign:"center"},children:e})]})]})};var Ee=a(6573),Be=a(4821),Pe=a(995);const ze=Object.assign({},Be.MD3LightTheme,{colors:Object.assign({},Be.MD3LightTheme.colors,{primary:"#d83dff",background:"#d1a3ff",surface:"#d1a3ff",text:"#2b2b2b",secondary:"#4ab19f",accent:"#f2c94c",asistenciaBuena:"#10b981",asistenciaMedia:"#ffb93f",asistenciaMala:"#ef4444"})}),De=Object.assign({},Pe.MD3DarkTheme,{colors:Object.assign({},Pe.MD3DarkTheme.colors,{primary:"#b14aca",background:"#302f2f",surface:"#1e1e1e",text:"#ffffff",secondary:"#4ab19f",accent:"#f2c94c",asistenciaBuena:"#097551",asistenciaMedia:"#f59e0b",asistenciaMala:"#e21313"})});var Ie=a(2162);const Ae=(0,s.createContext)({isDarkMode:!1,toggleTheme:()=>{},theme:ze}),_e=({children:e})=>{const t=(0,Ie.default)(),[a,r]=(0,s.useState)(!0),[n,o]=(0,s.useState)("dark"===t);(0,s.useEffect)((()=>{(async()=>{const e=await u("theme");"light"===e||"dark"===e?(r(!1),o("dark"===e)):(r(!0),o("dark"===t))})()}),[]),(0,s.useEffect)((()=>{a&&t&&o("dark"===t)}),[t,a]),(0,s.useEffect)((()=>{const e=Ee.default.addChangeListener((({colorScheme:e})=>{o("dark"===e)}));return()=>e.remove()}),[]);const i=n?De:ze;return(0,j.jsx)(Ae.Provider,{value:{isDarkMode:n,toggleTheme:async()=>{const e=!n;o(e),r(!1),await c("theme",e?"dark":"light")},theme:i},children:e})},Me=()=>(0,s.useContext)(Ae);function Oe(e){const{isDarkMode:t,toggleTheme:a}=Me(),{user:r,loading:o,logout:s}=w(),{epetCoin:l}=L(),d=[{icon:"grid-outline",label:"Dashboard",screen:"Home"},{icon:"person-outline",label:"Perfil",screen:"Perfil"},{icon:"book-outline",label:"Mis Aulas",screen:"MateriasStack"},{icon:"logo-bitcoin",label:r?.is_teacher?l?.nombre?l?.nombre:"epetCoins":"Mis epetCoins",screen:"Alarcoin"}];(0,n.useNavigation)();return(0,j.jsx)(i.DrawerContentScrollView,Object.assign({},e,{contentContainerStyle:{flex:1},children:(0,j.jsxs)(C.default,{style:Re.container,children:[(0,j.jsx)(ke,{user:r,loading:o,isalarcoins:!1}),(0,j.jsx)(we.default,{style:Re.nav,children:d.map(((t,a)=>(0,j.jsx)(i.DrawerItem,{icon:({color:e,size:a})=>(0,j.jsx)(G.default,{name:t.icon,color:e,size:a}),label:t.label,onPress:()=>e.navigation.navigate(t.screen)},a)))}),(0,j.jsxs)(we.default,{style:Re.bottom,children:[(0,j.jsxs)(C.default,{style:[Re.switchRow,Re.themeItem],children:[(0,j.jsx)(i.DrawerItem,{icon:({color:e,size:a})=>(0,j.jsx)(G.default,{name:t?"moon":"sunny",color:e,size:a}),label:t?"Modo oscuro":"Modo claro",onPress:a,style:{flex:1}}),(0,j.jsx)(ve.default,{value:t,onValueChange:a})]}),(0,j.jsx)(i.DrawerItem,{icon:({color:e,size:t})=>(0,j.jsx)(Ce.default,{name:"log-out",color:e,size:t}),label:"Cerrar sesi\xf3n",onPress:()=>{s()}})]})]})}))}const Re=v.default.create({container:{flex:1,paddingTop:24},nav:{marginTop:16},bottom:{marginTop:"auto",padding:5},switchRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8},themeItem:{paddingRight:8}});var Le=a(8112),We=a(2511),Ne=a(2061),$e=a(5933),Ve=a(6375),Fe=a(3479),Ge=a(5315);const Je=({historial:e,onSeleccionar:t,error:a})=>{const[r,n]=(0,s.useState)(!1),[o,i]=(0,s.useState)({label:"Elegir materia",id:null}),{colors:l}=(0,z.useTheme)(),d=()=>n(!1),c=(e,a)=>{i({label:e,id:a}),d(),t(a)};return(0,s.useEffect)((()=>{i({label:"Elegir materia",id:null})}),[e]),(0,j.jsxs)(C.default,{children:[(0,j.jsxs)(Fe.default,{visible:r,onDismiss:d,anchor:(0,j.jsx)(le.default,{mode:a?"contained-tonal":"outlined",onPress:()=>n(!0),contentStyle:He.buttonContent,style:[He.button,a&&{borderColor:l.error}],children:(0,j.jsxs)(C.default,{style:He.labelWithIcon,children:[(0,j.jsx)(G.default,{name:"book-outline",size:18,color:a?l.error:l.onSurface,style:He.iconLeft}),(0,j.jsxs)(C.default,{style:He.labelTextWrapper,children:[(0,j.jsx)(G.default,{name:r?"chevron-up":"chevron-down",size:18,color:a?l.error:l.onSurface,style:He.iconRight}),(0,j.jsx)(re.default,{style:[He.innerLabel,{color:l.onSurface}],children:o.label})]})]})}),children:[(0,j.jsx)(Fe.default.Item,{onPress:()=>c("Elegir materia",null),title:"Elegir materia",leadingIcon:()=>(0,j.jsx)(G.default,{name:"refresh-outline",size:18,color:l.primary})},"default-item"),(0,j.jsx)(Q.default,{}),e.map((e=>(0,j.jsx)(Fe.default.Item,{onPress:()=>c(e.nombre,e.aula_id),title:e.nombre,leadingIcon:()=>(0,j.jsx)(G.default,{name:"school-outline",size:18,color:l.primary})},e.aula_id)))]}),a&&(0,j.jsx)(Ge.default,{type:"error",visible:a,children:"Debes seleccionar una materia."})]})},He=v.default.create({buttonContent:{flexDirection:"row",justifyContent:"space-between"},button:{borderWidth:1},labelWithIcon:{flexDirection:"row",alignItems:"center"},labelTextWrapper:{flexDirection:"row",alignItems:"center",gap:6},iconLeft:{marginRight:8},iconRight:{marginRight:4},innerLabel:{paddingHorizontal:0}}),qe=({visible:e,onDismiss:t,user:a,is_teacher:r,selectedAula:n})=>{if(!a)return null;const{colors:o}=(0,z.useTheme)(),[i,l]=(0,s.useState)(r?"asignar":"historial"),[d,c]=(0,s.useState)("0"),[f,m]=(0,s.useState)(""),[h,g]=(0,s.useState)("1"),[x,p]=(0,s.useState)(null),[y,b]=(0,s.useState)(!1),[w,v]=(0,s.useState)(""),{transaccioncoins:S,loadAlarcoins:k,epetCoin:E}=L(),[B,P]=(0,s.useState)(!1),D=(0,s.useMemo)((()=>a?r?(S??[]).map((e=>{if("alumnos"in e&&Array.isArray(e.alumnos)){const t=e.alumnos.find((e=>e.id===a.id));if(t)return{aula_id:e.aula_id,nombre:e.nombre,epetcoins:t.epetcoins||[]}}return null})).filter((e=>null!==e)):n?[{aula_id:n.id,nombre:n.nombre,epetcoins:n.epetcoins}]:[]:[]),[S,a,r,n]);return(0,j.jsxs)(Le.default,{children:[(0,j.jsx)(We.default,{visible:y&&""!==w,duration:1e3,onDismiss:()=>{b(!1),v("")},action:{label:"Dale",onPress:()=>b(!1)},children:w}),(0,j.jsxs)(Ne.default,{visible:e,onDismiss:t,contentContainerStyle:{backgroundColor:o.surface,padding:10,margin:10,borderRadius:12,width:"90%",maxWidth:500,justifyContent:"flex-start",alignSelf:"center"},children:[(0,j.jsx)(C.default,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%",flexWrap:"nowrap",overflow:"hidden",marginBottom:8},children:(0,j.jsx)($e.default,{value:i,onValueChange:l,buttons:[{value:"historial",label:"Historial"},...r?[{value:"asignar",label:"Asignar"}]:[]],style:{flex:1,minWidth:0,maxWidth:"100%",borderRadius:12,overflow:"hidden"}})}),"asignar"===i&&r&&(0,j.jsxs)(V.default,{mode:"contained",style:{marginTop:10,padding:5},children:[(0,j.jsx)(N.default,{variant:"titleMedium",style:{marginBottom:5},children:`Gestionar Alarcoins de: ${a.nombre} ${a.apellido}`}),(0,j.jsx)(Je,{historial:D,onSeleccionar:p}),(0,j.jsx)(Q.default,{style:{marginVertical:16}}),(0,j.jsx)(N.default,{variant:"labelLarge",style:{marginBottom:4},children:"Cantidad"}),(0,j.jsxs)(C.default,{style:{flexDirection:"row",alignItems:"center",gap:8},children:[(0,j.jsx)(le.default,{mode:"outlined",onPress:()=>c((e=>String(Math.max(0,Number(e)-1)))),children:"-"}),(0,j.jsx)(he.default,{value:d,onChangeText:c,keyboardType:"numeric",mode:"outlined",style:{flex:1}}),(0,j.jsx)(le.default,{mode:"outlined",onPress:()=>c((e=>String(Number(e)+1))),children:"+"})]}),(0,j.jsx)(he.default,{label:"Concepto",mode:"outlined",value:f,onChangeText:m,style:{marginTop:16}}),(0,j.jsx)(N.default,{variant:"labelLarge",style:{marginTop:16},children:"Tipo de operaci\xf3n"}),(0,j.jsx)(Ve.default.Group,{onValueChange:e=>g(e),value:h,children:(0,j.jsxs)(C.default,{style:{flexDirection:"row",justifyContent:"flex-end"},children:[(0,j.jsx)(Ve.default.Item,{label:"Sumar",value:"1"}),(0,j.jsx)(Ve.default.Item,{label:"Restar",value:"0"})]})}),(0,j.jsx)(Q.default,{style:{marginVertical:16}}),(0,j.jsx)(C.default,{style:{flexDirection:"row",justifyContent:"flex-end"},children:(0,j.jsx)(le.default,{mode:"contained",onPress:async()=>{if(!x||0===x)return v("Debes seleccionar una materia v\xe1lida."),void b(!0);if(!f.trim())return void me.default.alert("Atenci\xf3n","Debes ingresar un concepto.");P(!0);const e={aula_id:x,alumno_id:a.id,detalle:f,suma:Number(h),cantidad:Number(d),moneda_id:E?.id};try{await async function(e){const t=await u("token"),a=await fetch(`${A}/epetcoins/transaccion`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!a.ok){const e=await a.json();throw new Error(e.detail||"Error al asignar alarcoin")}return await a.json()}(e),c("0"),m(""),g("1"),p(null),t(),k(!0),v("Alarcoin guardado correctamente."),b(!0)}catch(r){v("error al guardar"),b(!0)}finally{P(!1)}},children:B?"Guardando...":"Guardar"})})]}),"historial"===i&&(0,j.jsxs)(C.default,{style:{marginTop:12},children:[(0,j.jsx)(N.default,{variant:"titleMedium",style:{marginBottom:8},children:"Historial de Epetcoins"}),D.every((e=>0===(e.epetcoins??[]).length))?(0,j.jsx)(N.default,{style:{marginTop:8},children:"No hay historial a\xfan"}):(0,j.jsx)(T.default,{children:D.filter((e=>(e.epetcoins??[]).length>0)).map((e=>{const t=e.epetcoins.reduce(((e,t)=>e+(t.suma?t.cantidad:-t.cantidad)),0);return(0,j.jsxs)(V.default,{style:{marginBottom:16},children:[(0,j.jsx)(V.default.Title,{title:(0,j.jsxs)(C.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,j.jsx)(N.default,{children:e.nombre}),(0,j.jsx)(N.default,{style:{marginLeft:8,fontWeight:"bold",color:t>=0?"green":"red"},children:`(${t})`})]},e.aula_id)}),(0,j.jsx)(V.default.Content,{children:e.epetcoins.map((e=>(0,j.jsxs)(C.default,{children:[(0,j.jsxs)(C.default,{style:{flexDirection:"row",justifyContent:"space-between",marginVertical:4},children:[(0,j.jsx)(N.default,{children:new Date(e.fecha).toLocaleDateString()}),(0,j.jsx)(N.default,{children:e.detalle}),(0,j.jsx)(N.default,{style:{color:e.suma?"green":"red"},children:e.suma?`+${e.cantidad}`:`-${e.cantidad}`})]},e.id),(0,j.jsx)(Q.default,{})]},e.id)))})]},e.aula_id)}))})]})]})]})};var Ue=a(4250);function Ke({isLoading:e,hasError:t,reLoad:r,children:n,errorMessage:o="Ocurri\xf3 un error al cargar los datos"}){return e?(0,j.jsx)(C.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,j.jsx)(W.default,{size:"large",color:"violet"})}):t?(0,j.jsxs)(C.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:[(0,j.jsx)(N.default,{variant:"titleLarge",style:{marginBottom:12,color:"#9333EA",textAlign:"center"},children:o}),(0,j.jsx)(Ue.default,{source:a(2058),style:{width:200,height:200,marginBottom:20,borderRadius:100},resizeMode:"contain"}),(0,j.jsx)(le.default,{mode:"contained",onPress:r,children:"Reintentar"})]}):(0,j.jsx)(j.Fragment,{children:n})}function Ze({materia:e,onPress:t,porcentaje:a=0,is_alumno:r,alarcoin:n,coin:o}){const{colors:i}=(0,z.useTheme)();return(0,j.jsx)(V.default,{style:[Qe.card],mode:"outlined",onPress:t?()=>t(e):void 0,children:(0,j.jsx)(P.LinearGradient,{colors:r&&!n?(e=>0===e?["transparent","transparent"]:e<60?[i.background,i.asistenciaMala]:e<79?[i.background,i.asistenciaMedia]:[i.background,i.asistenciaBuena])(a):["#trnasparent","transparent"],start:{x:.4,y:.3},end:{x:1,y:1},style:{borderRadius:8,padding:10},children:(0,j.jsxs)(V.default.Content,{style:Qe.cardContent,children:[(0,j.jsxs)(C.default,{style:Qe.infoLeft,children:[(0,j.jsx)(N.default,{variant:"titleMedium",children:e.nombre}),(0,j.jsx)(C.default,{style:Qe.scheduleRow,children:(0,j.jsx)(N.default,{variant:"bodySmall",children:`${e.ano}\xb0 ${e.division}\xb0 - ${e.especialidad}`})})]}),(0,j.jsxs)(C.default,{style:Qe.infoRight,children:[(0,j.jsx)(N.default,{variant:"labelSmall",children:r&&null==n?"Asistencias":null!=n?o:" Clases dictadas"}),(0,j.jsx)(N.default,{variant:"titleMedium",style:Qe.classCount,children:r&&null==n?`${a}%`:null!=n?n:e.cantidad_clases})]})]})})})}const Qe=v.default.create({card:{marginBottom:16,width:"100%",marginHorizontal:10,maxWidth:450,borderRadius:8,elevation:3,alignSelf:"center"},cardContent:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},infoLeft:{flex:1,gap:4},scheduleRow:{flexDirection:"row",alignItems:"center",marginTop:4,gap:6},infoRight:{alignItems:"flex-end"},classCount:{marginTop:2,fontWeight:"600"}});var Xe=a(5539);function Ye({items:e,renderItem:t,getKey:a,numColumns:r,refreshing:n,onRefresh:o,ListEmptyComponent:i,ListFooterComponent:s,alumno:l}){const{width:d}=(0,S.default)(),c=!0===l?1:r||(d>=900?2:1);return(0,j.jsx)(Xe.default,{data:e,keyExtractor:e=>a(e).toString(),numColumns:c,refreshing:n,onRefresh:o,contentContainerStyle:{padding:12,gap:12,paddingBottom:32},columnWrapperStyle:c>1?{gap:12,justifyContent:"space-between",marginBottom:12}:void 0,renderItem:({item:e})=>(0,j.jsx)(C.default,{style:{flex:1,marginBottom:12},children:t(e)}),ListEmptyComponent:i,ListFooterComponent:s},c)}const et=({onCreated:e})=>{const{user:t}=w(),a=`${t?.apellido||"Mi"}Coin`,[r,n]=(0,s.useState)(a),[o,i]=(0,s.useState)(!1),[l,d]=(0,s.useState)("");return(0,j.jsxs)(C.default,{style:{gap:12,padding:16},children:[(0,j.jsx)(N.default,{variant:"titleMedium",children:"Activar tu moneda personalizada"}),(0,j.jsx)(he.default,{label:"Nombre de la moneda",value:r,onChangeText:n,mode:"outlined"}),l?(0,j.jsx)(N.default,{style:{color:"red"},children:l}):null,(0,j.jsx)(le.default,{mode:"contained",onPress:async()=>{if(r.trim()){d(""),i(!0);try{await async function(e){try{const t=await u("token"),a=await fetch(`${A}/epetcoins/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({nombre:e})});return await a.json()}catch(l){return void console.error("Error al consultar /me",l)}}(r),e()}catch(t){d("Error al crear la moneda"),console.error(t)}finally{i(!1)}}else d("Debes ingresar un nombre v\xe1lido")},loading:o,disabled:o,children:"Crear Epetcoin"})]})},tt=()=>{const{user:e}=w(),{alumnosMap:t,loadAlarcoins:a,alarcoinsError:r,aulas:n,epetCoin:o,transaccioncoins:i}=L(),[l,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(),[f,m]=(0,s.useState)(!1),[h,g]=(0,s.useState)(!0),{width:x}=(0,S.default)(),p=(0,s.useMemo)((()=>x>=1e3?3:x>=600?2:1),[x]);(0,s.useEffect)((()=>{(async()=>{g(!0),a(),g(!1)})()}),[]);const y=t=>{e?.is_teacher?d(t):(d(e),u(t)),m(!0)},b=e?.is_teacher?Object.values(t):i??[];return(0,j.jsx)(D,{children:(0,j.jsx)(Ke,{isLoading:h,hasError:r,errorMessage:"Error al cargar los Alarcoins",reLoad:()=>a(!0),children:h?(0,j.jsxs)(C.default,{style:{flex:1,justifyContent:"center",alignItems:"center",marginVertical:40},children:[(0,j.jsx)(G.default,{name:"refresh-circle",size:48,color:"#888",style:{marginBottom:10}}),(0,j.jsx)(N.default,{variant:"titleMedium",children:"Cargando..."})]}):(0,j.jsxs)(j.Fragment,{children:[e?.is_teacher?o?.nombre?(0,j.jsx)(N.default,{children:o.nombre}):(0,j.jsx)(et,{onCreated:a}):null,(!e?.is_teacher||o?.nombre)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(C.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[(0,j.jsx)(N.default,{variant:"titleMedium",children:e?.is_teacher?"Tus Alumnos":"Tus EpetCoin"}),(0,j.jsx)(C.default,{style:{marginBottom:10,width:200},children:(0,j.jsx)(le.default,{mode:"contained",style:{borderRadius:8,marginVertical:10},onPress:()=>a(!0),icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"refresh",color:e,size:t}),children:"Refrescar"})})]}),e?.is_teacher||0!==i?.length?(0,j.jsx)(Ye,{items:b,numColumns:p,renderItem:t=>{if(e?.is_teacher)return(0,j.jsx)(be.default,{style:({pressed:e})=>[{flex:1,opacity:e?.5:1}],onPress:()=>y(t),children:(0,j.jsx)(ke,{user:t,loading:!1,isalarcoins:!0,alarcoins:t.epetcoin,desdeProfe:!0})});{const e=n.find((e=>e.id===t.aula_id));if(!e)return null;const a=(t.epetcoins??[]).reduce(((e,t)=>e+(t.suma?t.cantidad:-t.cantidad)),0);return(0,j.jsx)(be.default,{style:({pressed:e})=>[{flex:1,opacity:e?.5:1}],onPress:()=>y(t),children:(0,j.jsx)(Ze,{coin:t.nombre_moneda,materia:e,is_alumno:!0,alarcoin:a})})}},getKey:t=>e?.is_teacher?t.id:t.aula_id,refreshing:h,onRefresh:()=>a(!0),alumno:!e?.is_teacher}):(0,j.jsx)(N.default,{style:{marginTop:20,textAlign:"center"},children:"A\xfan no ten\xe9s EpetCoins asignadas."})]}),(0,j.jsx)(qe,{visible:f,onDismiss:()=>{m(!1)},user:l,is_teacher:e?.is_teacher,selectedAula:c})]})})})},at=()=>{const{setUser:e}=w(),[t,a]=((0,n.useNavigation)(),(0,s.useState)(!1)),[r,o]=(0,s.useState)(null),i=se.object().shape({newPassword:se.string().min(6,"La contrase\xf1a debe tener al menos 6 caracteres").matches(/[A-Z]/,"La contrase\xf1a debe contener al menos una letra may\xfascula").required("Campo obligatorio"),confirmPassword:se.string().oneOf([se.ref("newPassword")],"Las contrase\xf1as no coinciden").required("Campo obligatorio")});return(0,j.jsx)(D,{children:(0,j.jsx)(C.default,{style:rt.container,children:(0,j.jsxs)(V.default,{style:rt.card,children:[(0,j.jsx)(V.default.Title,{title:"Cambia tu contrase\xf1a",subtitle:"Por seguridad, debes actualizarla"}),(0,j.jsx)(V.default.Content,{children:(0,j.jsx)(ie.Formik,{initialValues:{newPassword:"",confirmPassword:""},validationSchema:i,onSubmit:async t=>{a(!0),o(null);try{const a=await ge({password:t.newPassword,cambiarContrasena:!1});e(Object.assign({},a)),await d(a)}catch(r){o(r.message||"Error al cambiar la contrase\xf1a")}finally{a(!1)}},children:({handleChange:e,handleBlur:a,handleSubmit:n,values:o,errors:i,touched:s})=>(0,j.jsxs)(C.default,{children:[(0,j.jsx)(he.default,{label:"Nueva contrase\xf1a",secureTextEntry:!0,value:o.newPassword,onChangeText:e("newPassword"),onBlur:a("newPassword"),style:rt.input}),s.newPassword&&i.newPassword&&(0,j.jsx)(N.default,{style:rt.error,children:i.newPassword}),(0,j.jsx)(he.default,{label:"Repetir contrase\xf1a",secureTextEntry:!0,value:o.confirmPassword,onChangeText:e("confirmPassword"),onBlur:a("confirmPassword"),style:rt.input}),s.confirmPassword&&i.confirmPassword&&(0,j.jsx)(N.default,{style:rt.error,children:i.confirmPassword}),r&&(0,j.jsx)(N.default,{style:rt.error,children:r}),(0,j.jsx)(le.default,{mode:"contained",onPress:()=>n(),style:rt.button,disabled:t,loading:t,children:"Guardar contrase\xf1a"})]})})})]})})})},rt=v.default.create({container:{flex:1,width:"100%",alignItems:"center",padding:20,justifyContent:"center"},card:{width:"100%",maxWidth:600},input:{marginBottom:10},button:{marginTop:10},error:{color:"red",marginBottom:10}});const nt=()=>{const{width:e}=(0,S.default)(),t=e>=900?2:1,{user:a,token:r}=w(),o=(0,n.useNavigation)(),{aulas:i}=L(),[d,c]=(0,s.useState)(!0),[u,f]=(0,s.useState)([]),m=async()=>{c(!0);try{const e=await async function(e){const t=await fetch(`${A}/asistencias/mis-asistencias`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok){const e=await t.json();throw new Error(e.detail||"Error al iniciar sesi\xf3n")}return await t.json()}(r);f(e),await(async e=>{try{await l.default.setItem("asistencias",JSON.stringify(e))}catch(t){console.error("Error al guardar asistencias:",t)}})(e)}catch(e){console.error("Error recargando asistencias",e)}finally{c(!1)}};(0,s.useEffect)((()=>{a?.is_teacher||(async()=>{c(!0);const e=await(async()=>{try{const e=await l.default.getItem("asistencias");return e?JSON.parse(e):null}catch(e){return console.error("Error al leer asistencias:",e),null}})();if(e)return f(e),void c(!1);m()})()}),[d]);return(0,j.jsxs)(D,{children:[(0,j.jsxs)(C.default,{style:ot.header,children:[(0,j.jsxs)(C.default,{children:[(0,j.jsx)(N.default,{variant:"titleLarge",style:ot.title,children:"Mis Materias"}),(0,j.jsx)(N.default,{variant:"bodyMedium",style:ot.subtitle,children:a?.is_teacher?"Lista de materias que dictas":"Lista de materias que cursas"})]}),(0,j.jsx)(le.default,{mode:"contained",style:ot.button,onPress:m,icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"refresh",color:e,size:t}),children:"Refrescar"})]}),(0,j.jsx)(T.default,{contentContainerStyle:{paddingBottom:32,gap:12,flexDirection:t>1?"row":"column",flexWrap:t>1?"wrap":"nowrap",justifyContent:t>1?"center":"flex-start"},children:i.map((r=>{const n=u.find((e=>e.aula_id===r.id)),i=n?.porcentaje_asistencia,s=u.find((e=>e.aula_id===r.id)),l=s?.asistencias||[];return(0,j.jsx)(C.default,{style:[ot.card,t>1&&{width:e/2-24,marginHorizontal:6}],children:(0,j.jsx)(Ze,{materia:r,onPress:()=>((e,t)=>{o.navigate("MateriasStack",{screen:"DetalleMateria",params:{materia:e,asistencia:t}})})(r,l),porcentaje:i,is_alumno:!a?.is_teacher,alarcoin:void 0})},r.id)}))})]})},ot=v.default.create({container:{padding:16,justifyContent:"center",alignItems:"center"},header:{marginBottom:24,flexDirection:"row",justifyContent:"space-between",alignContent:"center"},title:{fontWeight:"bold"},subtitle:{marginTop:4,color:"#6b7280"},card:{marginBottom:16},cardContent:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},infoLeft:{flex:1,gap:4},scheduleRow:{flexDirection:"row",alignItems:"center",marginTop:4,gap:6},scheduleText:{color:"#6b7280"},infoRight:{alignItems:"flex-end"},label:{color:"#6b7280"},classCount:{marginTop:2,fontWeight:"600"},button:{borderRadius:8,marginVertical:10}});function it({visible:e,onClose:t,clase:a}){const{token:r}=w(),{alumnosMap:n,aulas:o}=L(),[i,l]=(0,s.useState)([]),[d,c]=(0,s.useState)(!0),[u,f]=(0,s.useState)(""),[m,h]=(0,s.useState)([]),{colors:g}=(0,z.useTheme)(),{width:x}=(0,S.default)(),p=x<600,y=x>=1e3?3:x>=700?2:1,b=o.find((e=>e.id===a.aula_id)),v=b?.alumnoIds.map((e=>n[e])).filter(Boolean).filter((e=>!a.grupo_id||e.grupo_id===a.grupo_id))??[];(0,s.useEffect)((()=>{if(!e)return;c(!0);(async()=>{try{const e=await async function(e,t){const a=await fetch(`${A}/asistencias/asistencias-por-clase/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!a.ok){const e=await a.json();throw new Error(e.detail||"Error al iniciar sesi\xf3n")}return await a.json()}(a.id,r);if(l(e),0===e.length){const e=v.map((e=>({alumno_id:e.id,presente:1})));h(e)}}catch(e){console.error("Error al obtener asistencias:",e)}finally{c(!1)}})(),h([])}),[e,a.id]),(0,s.useEffect)((()=>{e||(l([]),h([]))}),[e]);const k=v.filter((e=>{const t=u.toLowerCase();return e.nombre.toLowerCase().includes(t)||e.apellido.toLowerCase().includes(t)})),E=(e,t)=>{h((a=>a.find((t=>t.alumno_id===e))?a.map((a=>a.alumno_id===e?Object.assign({},a,{presente:t}):a)):[...a,{alumno_id:e,presente:t}]))};return(0,j.jsx)(Le.default,{children:(0,j.jsxs)(Ne.default,{visible:e,onDismiss:t,contentContainerStyle:[st.modalContainer,{backgroundColor:g.background}],children:[(0,j.jsxs)(N.default,{variant:"titleMedium",style:st.headerTitle,children:["Asistencia - ",a.tema]}),d?(0,j.jsx)(W.default,{style:{marginVertical:20}}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(he.default,{label:"Buscar alumno",mode:"outlined",value:u,onChangeText:f,style:{marginBottom:10},placeholder:"Nombre o apellido"}),(0,j.jsx)(T.default,{contentContainerStyle:st.scroll,children:(0,j.jsx)(C.default,{style:[st.grid,{gap:12}],children:k.map((e=>{const t=i.find((t=>t.alumno_id===e.id)),a=m.find((t=>t.alumno_id===e.id)),r=a?.presente?.toString()??t?.presente?.toString()??"",n=a?.justificado??t?.justificado??"";return(0,j.jsx)(C.default,{style:[st.cardWrapper,{width:100/y-4+"%"}],children:(0,j.jsx)(V.default,{mode:"outlined",style:st.alumnoCard,children:(0,j.jsxs)(V.default.Content,{style:{gap:4,padding:5},children:[(0,j.jsxs)(N.default,{style:st.nombreAlumno,children:[e.nombre," ",e.apellido]}),(0,j.jsx)(Ve.default.Group,{onValueChange:t=>E(e.id,parseInt(t)),value:r,children:(0,j.jsx)(C.default,{style:st.radioRowFixed,children:[{label:p?"P":"Presente",value:"1"},{label:p?"A":"Ausente",value:"2"},{label:p?"T":"Tarde",value:"3"}].map((t=>(0,j.jsxs)(be.default,{style:st.radioItemPressable,onPress:()=>E(e.id,parseInt(t.value)),children:[(0,j.jsx)(Ve.default,{value:t.value,status:r===t.value?"checked":"unchecked",onPress:()=>E(e.id,parseInt(t.value))}),(0,j.jsx)(N.default,{style:[p?st.radioLabelMobile:st.radioLabel,st.radioLabelText],children:t.label})]},t.value)))})}),(0,j.jsx)(he.default,{label:"Justificaci\xf3n",mode:"outlined",value:n,onChangeText:t=>{return a=e.id,r=t,void h((e=>e.find((e=>e.alumno_id===a))?e.map((e=>e.alumno_id===a?Object.assign({},e,{justificado:r}):e)):[...e,{alumno_id:a,presente:2,justificado:r}]));var a,r}})]})})},e.id)}))})})]}),(0,j.jsxs)(C.default,{style:st.buttonRow,children:[(0,j.jsx)(le.default,{mode:"text",onPress:t,children:"Cancelar"}),(0,j.jsx)(le.default,{mode:"contained",onPress:async()=>{c(!0);try{if(0===m.length)return void me.default.alert("Sin cambios","No se detectaron asistencias editadas.");const e=v.map((e=>{const t=m.find((t=>t.alumno_id===e.id));return{alumno_id:e.id,presente:t?.presente??1,justificado:t?.justificado??"no"}}));await async function(e,t,a){const r=await fetch(`${A}/asistencias/masiva/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(a)});if(!r.ok){const e=await r.json();throw new Error(e.detail||"Error al guardar asistencias")}}(a.id,r,e),me.default.alert("Guardado","Las asistencias fueron actualizadas correctamente."),h([]),t()}catch(e){console.error("Error al guardar asistencias:",e),me.default.alert("Error",e.message||"Ocurri\xf3 un error al guardar.")}finally{c(!1)}},children:d?"guardando":"Guardar"})]})]})})}const st=v.default.create({modalContainer:{margin:10,padding:20,borderRadius:12,maxHeight:"95%"},scroll:{paddingVertical:5},headerTitle:{marginBottom:12},grid:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between"},cardWrapper:{marginBottom:16},alumnoCard:{borderRadius:12},nombreAlumno:{fontWeight:"600",marginBottom:4},radioRow:{flexDirection:"row",justifyContent:"space-evenly"},buttonRow:{flexDirection:"row",justifyContent:"flex-end",marginTop:20,gap:10},radioRowFixed:{flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",flexWrap:"nowrap"},radioItemFixed:{flex:1,margin:0,padding:0},radioLabel:{fontSize:14},radioLabelMobile:{fontSize:12},radioItemPressable:{flex:1,alignItems:"center",justifyContent:"center",flexDirection:"column",minWidth:50,maxWidth:80},radioLabelText:{textAlign:"center",flexShrink:1}});function lt({clase:e,asistencia:t}){const[a,r]=(0,s.useState)(!1),{user:n}=w(),{colors:o}=(0,z.useTheme)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(V.default,{style:[dt.card],children:(0,j.jsx)(P.LinearGradient,{colors:n?.is_teacher?["#trnasparent","transparent"]:(e=>1===e?[o.background,o.asistenciaBuena]:2===e?[o.background,o.asistenciaMala]:3===e?[o.background,o.asistenciaMedia]:["transparent","transparent"])(t?.presente),start:{x:.4,y:.3},end:{x:1,y:1},style:{borderRadius:8,padding:10},children:(0,j.jsxs)(V.default.Content,{children:[(0,j.jsxs)(C.default,{style:dt.headerRow,children:[(0,j.jsx)(N.default,{variant:"titleSmall",style:dt.cardTitle,children:e.tema}),(0,j.jsx)(C.default,{style:dt.iconButtons,children:n?.is_teacher?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(G.default,{name:"create-outline",size:20,color:"#9CA3AF",style:dt.iconMargin}),(0,j.jsx)(G.default,{name:"trash-outline",size:20,color:"#9CA3AF"})]}):(0,j.jsxs)(N.default,{variant:"bodyMedium",children:[" ",t?1===t.presente?"Presente":2===t.presente?"Ausente":"Tarde":"Sin asistencia"]})})]}),(0,j.jsxs)(C.default,{style:dt.scheduleRow,children:[(0,j.jsx)(G.default,{name:"calendar-outline",size:13,color:"#9CA3AF",style:dt.iconMargin}),(0,j.jsx)(N.default,{variant:"bodySmall",style:dt.cardSubtitle,children:e.fecha.toString()})]}),n?.is_teacher&&(0,j.jsx)(le.default,{mode:"outlined",icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"checkmark-circle",color:e,size:t}),style:dt.attendanceButton,onPress:()=>r(!0),children:"Tomar asistencia"})]})})}),(0,j.jsx)(it,{visible:a,onClose:()=>r(!1),clase:e})]})}const dt=v.default.create({card:{width:"100%",maxWidth:400,borderRadius:8,elevation:2,alignSelf:"center",marginHorizontal:15,marginBottom:10},headerRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},iconButtons:{flexDirection:"row"},iconMargin:{marginRight:8},scheduleRow:{flexDirection:"row",alignItems:"center",marginTop:4},cardTitle:{fontWeight:"bold",marginBottom:4},cardSubtitle:{color:"#6B7280"},attendanceButton:{marginTop:10},modalBackdrop:{flex:1,backgroundColor:"rgba(0,0,0,0.4)",justifyContent:"center",alignItems:"center"},modalContainer:{width:"85%",padding:20,backgroundColor:"white",borderRadius:10,elevation:5},modalCloseButton:{marginTop:20,alignSelf:"flex-end"},modalCloseText:{color:"#2563EB",fontWeight:"bold"}});function ct(){const{width:e}=(0,S.default)(),t=(0,n.useRoute)(),{materia:r,asistencia:o}=t.params,i=(0,n.useNavigation)(),{token:l,user:d}=w(),[c,f]=(0,s.useState)(!0),[m,x]=(0,s.useState)([]),[p,y]=(0,s.useState)(!1),[b,v]=(0,s.useState)(null),[k,E]=(0,s.useState)(null),{colors:B}=(0,z.useTheme)(),P=async(e=!1)=>{let t=l;l||(t=await u("token"));try{if(!e){const e=await g(r.id);if(e)return x(e),void f(!1)}const a=await async function(e,t){const a=await fetch(`${A}/clases/aulas/${e}/clases`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!a.ok){const e=await a.json();throw new Error(e.detail||"Error al iniciar sesi\xf3n")}return await a.json()}(r.id,t);x(a),await h(r.id,a)}catch(p){console.log("error al obtener las clases",p),y(!0)}finally{f(!1)}},I=(d?.is_teacher?m:m.filter((e=>!/^clases\s+\d+/i.test(e.tema)))).filter((e=>(null===b||e.grupo_id===b)&&(null===k||e.cuatrimestre===k))),_=e>=1024?3:e>=600?2:1,M=e<600;(0,s.useEffect)((()=>{P()}),[]);return(0,j.jsx)(D,{children:(0,j.jsxs)(C.default,{style:ut.container,children:[(0,j.jsxs)(C.default,{style:[ut.sectionHeader,M&&{flexDirection:"column",alignItems:"flex-start",gap:8}],children:[(0,j.jsxs)(C.default,{style:[ut.headerRow,M&&{flexDirection:"row",alignItems:"center"}],children:[(0,j.jsx)(le.default,{onPress:()=>{i.goBack()},mode:"text",compact:!0,icon:({size:e,color:t})=>(0,j.jsx)(G.default,{name:"arrow-back",size:16,color:B.primary}),contentStyle:ut.backButton,labelStyle:[ut.backButtonText,M&&{display:"none"}],children:!M&&"Volver"}),(0,j.jsx)(N.default,{variant:M?"titleSmall":"titleMedium",style:[ut.subjectTitle,{flexShrink:1,flexWrap:"wrap",maxWidth:M?"90%":"100%"}],numberOfLines:1,ellipsizeMode:"tail",children:r.nombre})]}),(0,j.jsxs)(C.default,{style:ut.scheduleRow,children:[(0,j.jsx)(le.default,{mode:"contained",style:ut.addButton,onPress:()=>P(!0),icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"refresh",color:e,size:t}),children:"Refrescar"}),d?.is_teacher&&(0,j.jsx)(le.default,{icon:({color:e,size:t})=>(0,j.jsx)(G.default,{name:"add-circle-outline",color:e,size:t}),mode:"contained",onPress:()=>{},contentStyle:ut.addButtonContent,style:ut.addButton,children:"Agregar Clase"})]})]}),c?(0,j.jsx)(W.default,{size:"large",color:"violet"}):p?(0,j.jsxs)(C.default,{style:{alignItems:"center",justifyContent:"center",flex:1},children:[(0,j.jsx)(N.default,{variant:"titleLarge",style:{marginBottom:12,color:"#9333EA",textAlign:"center"},children:"Ocurri\xf3 un error al cargar las clases"}),(0,j.jsx)(Ue.default,{source:a(2058),style:{width:180,height:180,marginBottom:20,borderRadius:90,opacity:.85},resizeMode:"contain"}),(0,j.jsx)(le.default,{mode:"contained",onPress:()=>{f(!0),y(!1),P()},style:{marginTop:8},children:"Reintentar"})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(C.default,{style:{flexDirection:"row",gap:8,marginBottom:12,flexWrap:"wrap"},children:[d?.is_teacher?"taller"===r.tipo&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(le.default,{mode:null===b?"contained":"outlined",onPress:()=>v(null),children:"Todos los grupos"}),[1,2].map((e=>(0,j.jsxs)(le.default,{mode:b===e?"contained":"outlined",onPress:()=>v(e),children:["G ",e]},e)))]}):(0,j.jsx)(N.default,{children:" "}),(0,j.jsx)(le.default,{mode:null===k?"contained":"outlined",onPress:()=>E(null),children:"Todos los cuatris"}),[1,2].map((e=>(0,j.jsxs)(le.default,{mode:k===e?"contained":"outlined",onPress:()=>E(e),children:["C ",e]},e)))]}),(0,j.jsx)(T.default,{contentContainerStyle:{paddingBottom:d?.is_teacher?90:32,paddingHorizontal:6,gap:10},showsVerticalScrollIndicator:!1,children:0===I.length?(0,j.jsxs)(C.default,{children:[(0,j.jsx)(G.default,{name:"information-circle-outline",size:48,color:"#A78BFA"}),(0,j.jsx)(N.default,{style:{color:"#6B7280",marginTop:12,textAlign:"center"},children:"No hay clases registradas a\xfan."})]}):((e,t)=>{const a=[];for(let r=0;r<e.length;r+=t)a.push(e.slice(r,r+t));return a})(I,_).map(((e,t)=>(0,j.jsxs)(C.default,{style:{flexDirection:"row",justifyContent:_>1?"center":"flex-start",marginBottom:10,gap:10},children:[e.map((e=>{const t=o.find((t=>t.id===e.id));return(0,j.jsx)(C.default,{style:{flex:1,maxWidth:100/_+"%"},children:(0,j.jsx)(C.default,{children:(0,j.jsx)(lt,{clase:e,asistencia:t})})},e.id)})),e.length<_&&Array.from({length:_-e.length}).map(((e,t)=>(0,j.jsx)(C.default,{style:{flex:1,maxWidth:100/_+"%",minHeight:120}},`empty-${t}`)))]},t)))})]})]})})}const ut=v.default.create({container:{flex:1,padding:10},backButton:{flexDirection:"row",alignItems:"center",paddingLeft:0},backButtonText:{color:"#4B5563",fontSize:14,marginLeft:4},scheduleRow:{flexDirection:"row",alignItems:"center",marginTop:4,gap:6},subjectTitle:{fontWeight:"bold"},subjectSchedule:{color:"#6B7280",marginTop:4,marginBottom:4},sectionHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginVertical:8},addButton:{borderRadius:8,marginVertical:10},addButtonContent:{flexDirection:"row"},headerRow:{flexDirection:"row",alignItems:"center",gap:8}}),ft=(0,o.createNativeStackNavigator)();function mt(){return(0,j.jsxs)(ft.Navigator,{screenOptions:{headerShown:!1},children:[(0,j.jsx)(ft.Screen,{name:"Materias",component:nt,options:{title:"adminAulas | Mis Materias"}}),(0,j.jsx)(ft.Screen,{name:"DetalleMateria",component:ct,options:{title:"adminAulas | Detalle de Materia"}})]})}const ht=(0,o.createNativeStackNavigator)(),gt=(0,i.createDrawerNavigator)();function xt(){const{colors:e}=(0,z.useTheme)(),{user:t}=w(),a=(0,s.useMemo)((()=>t),[t]);return(0,j.jsxs)(gt.Navigator,{drawerContent:e=>(0,j.jsx)(Oe,Object.assign({},e)),screenOptions:({navigation:t})=>({headerStyle:{backgroundColor:e.elevation.level2},headerTintColor:e.primary,headerTitleStyle:{fontWeight:"bold"},headerRight:()=>(0,j.jsx)(C.default,{style:{padding:2},children:(0,j.jsx)(be.default,{onPress:()=>t.navigate("Perfil"),style:{},children:(0,j.jsx)(Z.default,{label:Se(a?.nombre,a?.apellido),size:40,style:{backgroundColor:e.primary,width:40,height:40,marginRight:10}})})})}),children:[(0,j.jsx)(gt.Screen,{name:"Home",component:te,options:{title:"adminAulas | Dashboard"}}),(0,j.jsx)(gt.Screen,{name:"MateriasStack",component:mt,options:{title:"adminAulas | Mis Materias"}}),(0,j.jsx)(gt.Screen,{name:"Perfil",component:ye,options:{title:"adminAulas | Mi Perfil"}}),(0,j.jsx)(gt.Screen,{name:"Alarcoin",component:tt,options:{title:"adminAulas | Mis Alarcoin"}})]})}const pt=()=>{const{user:e}=w(),{theme:t}=Me(),a=t.dark?Object.assign({},n.DarkTheme,{colors:Object.assign({},n.DarkTheme.colors,t.colors)}):Object.assign({},n.DefaultTheme,{colors:Object.assign({},n.DefaultTheme.colors,t.colors)});return(0,j.jsx)(n.NavigationContainer,{theme:a,children:(0,j.jsx)(ht.Navigator,{children:e?e.cambiarContrasena?(0,j.jsx)(ht.Screen,{name:"CambiarContra",component:at,options:{title:"adminAulas | Cambiar Contrase\xf1a",headerShown:!1}}):(0,j.jsx)(ht.Screen,{name:"Main",component:xt,options:{headerShown:!1}}):(0,j.jsx)(ht.Screen,{name:"Login",component:ce,options:{headerShown:!1}})})})};function jt(){return(0,j.jsx)(b,{children:(0,j.jsx)(R,{children:(0,j.jsx)(pt,{})})})}var yt=a(4465),bt=a(9836),wt=a(1667),vt=a(2059),Ct=a(535);const St=({onFinish:e})=>{const{colors:t}=(0,z.useTheme)(),a=new Ct.default.Value(0);return(0,s.useEffect)((()=>{Ct.default.timing(a,{toValue:1,duration:1e3,useNativeDriver:!0}).start((()=>{setTimeout((()=>{Ct.default.timing(a,{toValue:.5,duration:500,useNativeDriver:!0}).start((()=>{e()}))}),1e3)}))}),[]),(0,j.jsx)(Ct.default.View,{style:[Tt.container,{opacity:a},{backgroundColor:$}],children:(0,j.jsx)(N.default,{variant:"titleLarge",style:Tt.title,children:"AdminAulas \ud83d\ude80"})})},Tt=v.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},title:{fontSize:32,fontWeight:"bold"}});function kt(){const{theme:e,isDarkMode:t}=Me();return(0,j.jsxs)(yt.default,{theme:e,children:[(0,j.jsx)(bt.StatusBar,{style:t?"light":"dark"}),(0,j.jsx)(jt,{})]})}vt.preventAutoHideAsync(),(0,r.default)((function(){const[e]=(0,wt.useFonts)(Object.assign({},X.default.font)),[t,a]=(0,s.useState)(!0),r=(0,s.useCallback)((async()=>{}),[e]);return(0,s.useEffect)((()=>{e&&r()}),[e]),e?(0,j.jsx)(_e,{children:t?(0,j.jsx)(St,{onFinish:async()=>{a(!1),await vt.hideAsync()}}):(0,j.jsx)(kt,{})}):null}))},2058:(e,t,a)=>{e.exports=a.p+"static/media/errorImagen.a23f855f5c97c01c10ea.png"}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.m=e,(()=>{var e=[];a.O=(t,r,n,o)=>{if(!r){var i=1/0;for(c=0;c<e.length;c++){for(var[r,n,o]=e[c],s=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](r[l])))?r.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,n,o]}})(),a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/",(()=>{var e={792:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[i,s,l]=r,d=0;if(i.some((t=>0!==e[t]))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(l)var c=l(a)}for(t&&t(r);d<i.length;d++)o=i[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=a.O(void 0,[404],(()=>a(1754)));r=a.O(r)})();
//# sourceMappingURL=main.d787e0c6.js.map